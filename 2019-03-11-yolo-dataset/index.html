<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title> ğŸ˜œ YOLO æ‰¹é‡å¤„ç† TUMã€KITTI æ•°æ®é›†å¹¶ä¿å­˜æ£€æµ‹ç»“æœ - å´è¨€å´è¯­</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="wuxiaolang" /><meta name="description" content="0. ä¸»è¦å·¥ä½œï¼š ä»£ç ï¼šhttps://github.com/wuxiaolang/darknet åœ¨ darknet.c ä¸­æ·»åŠ äº† detect_tum_batch å‘½ä»¤å¤„ç† tum å’Œè‡ªåˆ¶æ•°æ®é›†ï¼Œæ·»åŠ  detect_kitti_batch å‘½ä»¤" /><meta name="keywords" content="Hugo, theme, even" />


<meta name="baidu-site-verification" content="fHOS0ah0i1" />
<meta name="google-site-verification" content="4aEA7KB3m7LrWKNH4axTcMxXigooU2CLbEs_pmc_09s" />


<meta name="generator" content="Hugo 0.68.0 with theme even" />


<link rel="canonical" href="https://wym.netlify.app/2019-03-11-yolo-dataset/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<link href="/dist/even.fdd8141c.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content=" ğŸ˜œ YOLO æ‰¹é‡å¤„ç† TUMã€KITTI æ•°æ®é›†å¹¶ä¿å­˜æ£€æµ‹ç»“æœ" />
<meta property="og:description" content="0. ä¸»è¦å·¥ä½œï¼š ä»£ç ï¼šhttps://github.com/wuxiaolang/darknet åœ¨ darknet.c ä¸­æ·»åŠ äº† detect_tum_batch å‘½ä»¤å¤„ç† tum å’Œè‡ªåˆ¶æ•°æ®é›†ï¼Œæ·»åŠ  detect_kitti_batch å‘½ä»¤" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://wym.netlify.app/2019-03-11-yolo-dataset/" />
<meta property="article:published_time" content="2019-03-11T00:00:00+08:00" />
<meta property="article:modified_time" content="2019-03-11T00:00:00+08:00" />
<meta itemprop="name" content=" ğŸ˜œ YOLO æ‰¹é‡å¤„ç† TUMã€KITTI æ•°æ®é›†å¹¶ä¿å­˜æ£€æµ‹ç»“æœ">
<meta itemprop="description" content="0. ä¸»è¦å·¥ä½œï¼š ä»£ç ï¼šhttps://github.com/wuxiaolang/darknet åœ¨ darknet.c ä¸­æ·»åŠ äº† detect_tum_batch å‘½ä»¤å¤„ç† tum å’Œè‡ªåˆ¶æ•°æ®é›†ï¼Œæ·»åŠ  detect_kitti_batch å‘½ä»¤">
<meta itemprop="datePublished" content="2019-03-11T00:00:00&#43;08:00" />
<meta itemprop="dateModified" content="2019-03-11T00:00:00&#43;08:00" />
<meta itemprop="wordCount" content="1911">



<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content=" ğŸ˜œ YOLO æ‰¹é‡å¤„ç† TUMã€KITTI æ•°æ®é›†å¹¶ä¿å­˜æ£€æµ‹ç»“æœ"/>
<meta name="twitter:description" content="0. ä¸»è¦å·¥ä½œï¼š ä»£ç ï¼šhttps://github.com/wuxiaolang/darknet åœ¨ darknet.c ä¸­æ·»åŠ äº† detect_tum_batch å‘½ä»¤å¤„ç† tum å’Œè‡ªåˆ¶æ•°æ®é›†ï¼Œæ·»åŠ  detect_kitti_batch å‘½ä»¤"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">å°å´åŒå­¦çš„å´è¨€å´è¯­</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">åšå®¢</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">åˆ†ç±»</li>
      </a><a href="/slam/">
        <li class="mobile-menu-item">SLAM</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a><a href="/za/">
        <li class="mobile-menu-item"></li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">å°å´åŒå­¦çš„å´è¨€å´è¯­</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">åšå®¢</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">åˆ†ç±»</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/slam/">SLAM</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/za/"></a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title"> ğŸ˜œ YOLO æ‰¹é‡å¤„ç† TUMã€KITTI æ•°æ®é›†å¹¶ä¿å­˜æ£€æµ‹ç»“æœ</h1>

      <div class="post-meta">
        <span class="post-time"> 2019-03-11 </span>
        <div class="post-category">
            <a href="/categories/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B/"> ç›®æ ‡æ£€æµ‹ </a>
            </div>
          <span class="more-meta"> çº¦ 1911 å­— </span>
          <span class="more-meta"> é¢„è®¡é˜…è¯» 4 åˆ†é’Ÿ </span>
        
        
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">æ–‡ç« ç›®å½•</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#0-ä¸»è¦å·¥ä½œ">0. ä¸»è¦å·¥ä½œï¼š</a></li>
    <li><a href="#1-æŒ‡ä»¤">1. æŒ‡ä»¤</a>
      <ul>
        <li><a href="#11-tum-æ•°æ®é›†">1.1 TUM æ•°æ®é›†</a></li>
        <li><a href="#12-kitti-æ•°æ®é›†">1.2 KITTI æ•°æ®é›†</a></li>
      </ul>
    </li>
    <li><a href="#2-tum-æ•°æ®é›†">2. TUM æ•°æ®é›†</a>
      <ul>
        <li><a href="#21-åœ¨-darknetc-ä¸­æ·»åŠ æŒ‡ä»¤å‚æ•°">2.1 åœ¨ darknet.c ä¸­æ·»åŠ æŒ‡ä»¤å‚æ•°</a></li>
        <li><a href="#22-åœ¨-detectorc-ä¸­æ·»åŠ è¯»å–å›¾ç‰‡å‡½æ•°">2.2 åœ¨ detector.c ä¸­æ·»åŠ è¯»å–å›¾ç‰‡å‡½æ•°</a></li>
      </ul>
    </li>
    <li><a href="#3-kitti-æ•°æ®é›†">3. KITTI æ•°æ®é›†</a>
      <ul>
        <li><a href="#31-åœ¨-darknetc-ä¸­æ·»åŠ æŒ‡ä»¤å‚æ•°">3.1 åœ¨ darknet.c ä¸­æ·»åŠ æŒ‡ä»¤å‚æ•°</a></li>
        <li><a href="#32-åœ¨-detectorc-ä¸­æ·»åŠ è¯»å–å¹¶æ£€æµ‹å›¾åƒçš„å‡½æ•°">3.2 åœ¨ detector.c ä¸­æ·»åŠ è¯»å–å¹¶æ£€æµ‹å›¾åƒçš„å‡½æ•°</a></li>
      </ul>
    </li>
    <li><a href="#4-åœ¨-imagec-ä¸­æ·»åŠ ä¿å­˜ç»“æœå‡½æ•°">4. åœ¨ image.c ä¸­æ·»åŠ ä¿å­˜ç»“æœå‡½æ•°</a></li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <h2 id="0-ä¸»è¦å·¥ä½œ">0. ä¸»è¦å·¥ä½œï¼š</h2>
<ul>
<li>ä»£ç ï¼š<a href="https://github.com/wuxiaolang/darknet"><strong>https://github.com/wuxiaolang/darknet</strong></a></li>
<li>åœ¨ <a href="https://github.com/wuxiaolang/darknet/blob/master/examples/darknet.c?1552372879559"><strong>darknet.c</strong></a> ä¸­æ·»åŠ äº† <code>detect_tum_batch</code> å‘½ä»¤å¤„ç† <strong>tum å’Œè‡ªåˆ¶æ•°æ®é›†</strong>ï¼Œæ·»åŠ  <code>detect_kitti_batch</code> å‘½ä»¤å¤„ç† <strong>kitti æ•°æ®é›†</strong>ï¼›</li>
<li>åœ¨ <a href="https://github.com/wuxiaolang/darknet/blob/master/examples/detector.c?1552372948327"><strong>detector.c</strong></a> ä¸­æ·»åŠ äº†<strong>è¯»å–æ•°æ®é›†å›¾åƒ</strong>çš„å‡½æ•° <code>test_detector_tum_batch()</code> å’Œ <code>test_detector_kitti_batch()</code>ï¼›</li>
<li>åœ¨ <a href="https://github.com/wuxiaolang/darknet/blob/master/src/image.c?1552373025166"><strong>image.c</strong></a> ä¸­æ·»åŠ äº†ç»˜åˆ¶ä¸<strong>ä¿å­˜ç»“æœ</strong>ï¼ˆtxt æ–‡ä»¶å’Œç»˜åˆ¶æ£€æµ‹æ¡†çš„å›¾åƒï¼‰çš„å‡½æ•° <code>draw_save_detections()</code>ã€‚</li>
</ul>
<hr>
<h2 id="1-æŒ‡ä»¤">1. æŒ‡ä»¤</h2>
<h3 id="11-tum-æ•°æ®é›†">1.1 TUM æ•°æ®é›†</h3>
<ul>
<li>æŒ‡ä»¤ï¼š</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">./darknet detect_tum_batch [path_of_cfg] [path_of_weight] [path_of_dataset] [output_folder] [-thresh thresh]
</code></pre></td></tr></table>
</div>
</div><ul>
<li>ä¾‹å¦‚ï¼š</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">./darknet detect_tum_batch cfg/yolov3.cfg yolov3.weights /home/wu/data/dataset/rgbd_dataset_freiburg1_desk/ /home/wu/data/ -thresh 0.4
</code></pre></td></tr></table>
</div>
</div><ul>
<li><strong>æ³¨æ„</strong>ï¼šè¯·åœ¨ [output_folder] ä¸‹åˆ›å»º <code>yolo_imgs</code> å’Œ <code>yolo_txts</code> æ–‡ä»¶å¤¹æ¥å­˜æ”¾ç»˜åˆ¶äº†æ£€æµ‹æ¡†çš„å›¾ç‰‡å’Œæ£€æµ‹æ¡† txt ä¿¡æ¯ã€‚</li>
</ul>
<h3 id="12-kitti-æ•°æ®é›†">1.2 KITTI æ•°æ®é›†</h3>
<ul>
<li>æŒ‡ä»¤ï¼š</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">./darknet detect_kitti_batch [path_of_cfg] [path_of_weight] [path_of_dataset] [output_folder] [-thresh thresh]
</code></pre></td></tr></table>
</div>
</div><p>â€ƒâ€ƒä¾‹å¦‚ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">./darknet detect_kitti_batch cfg/yolov3.cfg yolov3.weights /home/wu/data/dataset/kitti/color/07/ /home/wu/data/ -thresh 0.4
</code></pre></td></tr></table>
</div>
</div><ul>
<li><strong>æ³¨æ„</strong>ï¼š
<ul>
<li>â‘  è¯·åœ¨ [output_folder] ä¸‹åˆ›å»º <code>yolo_imgs</code> å’Œ <code>yolo_txts</code> æ–‡ä»¶å¤¹æ¥å­˜æ”¾ç»˜åˆ¶äº†æ£€æµ‹æ¡†çš„å›¾ç‰‡å’Œæ£€æµ‹æ¡† txt ä¿¡æ¯ï¼›</li>
<li>â‘¡ åœ¨ <code>test_detector_kitti_batch()</code> å‡½æ•°ä¸­é»˜è®¤<strong>é‡‡ç”¨çš„æ˜¯ <code>image_2</code> kitti å½©è‰²æ•°æ®é›†</strong>ï¼Œå¦‚æœä½¿ç”¨ gray æ•°æ®é›†ï¼Œå¯ä»¥å°† <code>image_2</code> æ”¹æˆ <code>image_0</code> æˆ– <code>image_1</code>ã€‚</li>
</ul>
</li>
<li><strong>å…¶ä»–æ•°æ®é›†</strong>ï¼šå¯ä»¿ç…§æ”¹åŠ¨çš„å‡½æ•°å†™ã€‚</li>
</ul>
<hr>
<h2 id="2-tum-æ•°æ®é›†">2. TUM æ•°æ®é›†</h2>
<h3 id="21-åœ¨-darknetc-ä¸­æ·»åŠ æŒ‡ä»¤å‚æ•°">2.1 åœ¨ darknet.c ä¸­æ·»åŠ æŒ‡ä»¤å‚æ•°</h3>
<ul>
<li><strong>å…·ä½“ä»£ç ï¼š</strong><a href="https://github.com/wuxiaolang/darknet/blob/master/examples/darknet.c?1552372879559"><strong>darknet.c</strong></a></li>
<li>åœ¨ main å‡½æ•°ä¸­æ·»åŠ è¾“å…¥çš„ç¬¬äºŒä¸ªå‚æ•° detect_tum_batch
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">else if (0 == strcmp(argv[1], &#34;detect_tum_batch&#34;))
{
     // è¯»å–é˜ˆå€¼ï¼Œé»˜è®¤ä¸º 0.5.
     float thresh = find_float_arg(argc, argv, &#34;-thresh&#34;, .5);
     // @PARAM    input_folder   è¾“å…¥æ•°æ®é›†è·¯å¾„.
     char *input_folder = (argc &gt; 4) ? argv[4]: 0;
     // @PARAM    output_folder  è¾“å‡ºç»“æœå­˜æ”¾è·¯å¾„.
     char *output_folder = (argc &gt; 5) ? argv[5]: 0;
     // å¼€å§‹å¤„ç†.
     test_detector_tum_batch(   &#34;cfg/coco.data&#34;, 
                                argv[2],            /* ç½‘ç»œæ¨¡å‹ */
                                argv[3],            /* æƒé‡æ–‡ä»¶ */
                                input_folder,       /* è¾“å…¥æ•°æ®é›†è·¯å¾„ */
                                output_folder,      /* è¾“å‡ºçš„ç»“æœè·¯å¾„ */
                                thresh, 
                                .5);
}
</code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h3 id="22-åœ¨-detectorc-ä¸­æ·»åŠ è¯»å–å›¾ç‰‡å‡½æ•°">2.2 åœ¨ detector.c ä¸­æ·»åŠ è¯»å–å›¾ç‰‡å‡½æ•°</h3>
<ul>
<li><strong>å…·ä½“ä»£ç ï¼š</strong><a href="https://github.com/wuxiaolang/darknet/blob/master/examples/detector.c?1552372948327"><strong>detector.c</strong></a></li>
<li>åœ¨ detector.c ä¸­æ·»åŠ ä¸Šä¸€æ­¥ä¸­ç”¨åˆ°çš„å‡½æ•°
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">void test_detector_tum_batch(   char *datacfg,      /* cfg/coco.data */
                                char *cfgfile,      /* ç½‘ç»œæ¨¡å‹ */
                                char *weightfile,   /* æƒé‡æ–‡ä»¶ */
                                char *input_folder, /* è¾“å…¥æ•°æ®é›†è·¯å¾„ */
                                char *output_folder,/* è¾“å‡ºç»“æœä¿å­˜è·¯å¾„ */
                                float thresh,       /* ç½®ä¿¡åº¦é˜ˆå€¼ */
                                float hier_thresh)
{â€¦â€¦}
</code></pre></td></tr></table>
</div>
</div></li>
<li>ä¸‹é¢æ˜¯å¤„ç†çš„ä¸»è¦æ­¥éª¤ã€‚</li>
</ul>
<h4 id="221-è¯»å–æ•°æ®é›†è·¯å¾„ä¸‹çš„-rgbtxt-æ–‡ä»¶">2.2.1 è¯»å–æ•°æ®é›†è·¯å¾„ä¸‹çš„ rgb.txt æ–‡ä»¶</h4>
<ul>
<li>ç”±äºç»™å‡ºçš„è·¯å¾„æ˜¯ <code>~/dataset/rgbd_dataset_freiburg1_desk/</code> ï¼Œæ•°æ®é›†å›¾ç‰‡å­˜æ”¾åœ¨ <code>~/dataset/rgbd_dataset_freiburg1_desk/rgb</code>ï¼Œå›¾ç‰‡åå­˜æ”¾åœ¨ <code>~/dataset/rgbd_dataset_freiburg1_desk/rgb.txt</code> ä¸­ï¼Œé¦–å…ˆè¯»å– <code>rgb.txt</code> æ–‡ä»¶ï¼š
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">// NOTE è¯»å–å›¾åƒæ–‡ä»¶åˆ—è¡¨ rgb.txt. rgb_txt_path = ~/dataset/rgbd_dataset_freiburg1_desk/rgb.txt
char buff[256];
char *rgb_txt_path = buff;
strncpy(rgb_txt_path, input_folder, 256); // input_folder è¿˜æ˜¯ ~/dataset/rgbd_dataset_freiburg3_long_office_household/
FILE *fp_rgb_txt = fopen(strcat(rgb_txt_path,&#34;rgb.txt&#34;), &#34;r&#34;);
</code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h4 id="222-è¯»å–å›¾ç‰‡æ–‡ä»¶å">2.2.2 è¯»å–å›¾ç‰‡æ–‡ä»¶å</h4>
<ul>
<li><code>rgb.txt</code> å­˜å‚¨çš„å†…å®¹å½¢å¼å¦‚ä¸‹ï¼Œä¸è€ƒè™‘å‰ä¸‰è¡Œï¼Œåé¢æ¯è¡Œåˆ†åˆ«ä¸ºæ—¶é—´æˆ³å’Œæ–‡ä»¶åï¼š
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback"># color images
# file: &#39;rgbd_dataset_freiburg1_desk.bag&#39;
# timestamp filename
1305031452.791720 rgb/1305031452.791720.png
1305031452.823674 rgb/1305031452.823674.png
1305031452.859642 rgb/1305031452.859642.png
1305031452.891726 rgb/1305031452.891726.png
1305031452.923715 rgb/1305031452.923715.png
1305031452.959701 rgb/1305031452.959701.png
1305031452.991647 rgb/1305031452.991647.png
1305031453.023650 rgb/1305031453.023650.png
1305031453.059754 rgb/1305031453.059754.png
1305031453.091704 rgb/1305031453.091704.png
</code></pre></td></tr></table>
</div>
</div></li>
<li><strong>è¯»å– 19-43 åˆ—çš„å›¾ç‰‡æ–‡ä»¶å</strong> img_nameï¼Œå†æ·»åŠ è·¯å¾„å¾—åˆ° input_img_name
<ul>
<li>å¦å¤–éœ€æ³¨æ„ txt æ–‡ä»¶çš„<strong>å‰ä¸‰è¡Œæ— æ•ˆï¼Œéœ€è¦è·³è¿‡</strong></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">int img_counter = -4;   // rgb.txt æ–‡ä»¶å‰ä¸‰è¡Œæ— æ•ˆ.
while(!feof(fp_rgb_txt))
{
    img_counter++;

    memset(szTest, 0, sizeof(szTest));
    fgets(szTest, sizeof(szTest) - 1, fp_rgb_txt); // åŒ…å«äº†æ¢è¡Œç¬¦

    // å‰ä¸‰è¡Œæ— æ•ˆä¸å­˜å‚¨ï¼Œä½†å¾—éå†è¯»å–ï¼Œæ‰€ä»¥è¿™ä¸ªåˆ¤æ–­åœ¨ä¸Šä¸¤è¡Œåé¢.
    if( img_counter &lt; 0)
        continue;

    strncpy(img_name, szTest+22, 17);               // æ¯è¡Œå‰é¢ 18ä½ä¸ºæ—¶é—´æˆ³ï¼Œåé¢æ˜¯æ–‡ä»¶å.
    sprintf(input_img_name, &#34;%srgb/%s.png&#34;, input_folder, img_name);
    printf(&#34;æ–‡ä»¶åï¼š %s\n&#34;, input_img_name);
}
fclose(fp_rgb_txt);
</code></pre></td></tr></table>
</div>
</div></li>
<li>è¾“å‡ºæ£€æµ‹çš„<strong>å›¾ç‰‡ç»“æœ</strong>ï¼Œè¾“å‡ºåœ¨ <code>output_folder/yolo_imgs</code> ä¸­</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">// NOTE è¾“å‡ºå›¾ç‰‡.
strncpy(output_file, output_folder, 256);
char frame_index_c3[256];
//sprintf(frame_index_c3,&#34;/yolo_imgs/%04d_yolo_%.2f&#34;,img_counter,thresh);  // 0001_yolo2_0.50.jpg
sprintf(frame_index_c3,&#34;yolo_imgs/%s&#34;,img_name);  // 1905140001.223000.jpg
char * result_img = strcat(output_file,frame_index_c3);
</code></pre></td></tr></table>
</div>
</div><hr>
<h2 id="3-kitti-æ•°æ®é›†">3. KITTI æ•°æ®é›†</h2>
<h3 id="31-åœ¨-darknetc-ä¸­æ·»åŠ æŒ‡ä»¤å‚æ•°">3.1 åœ¨ darknet.c ä¸­æ·»åŠ æŒ‡ä»¤å‚æ•°</h3>
<ul>
<li>ä¸ TUM æ•°æ®é›†ç±»ä¼¼ï¼Œä¿®æ”¹æŒ‡ä»¤åå’Œè°ƒç”¨çš„å‡½æ•°åå³å¯ï¼šdetect_kitti_batchï¼Œtest_detector_kitti_batch()ã€‚</li>
</ul>
<h3 id="32-åœ¨-detectorc-ä¸­æ·»åŠ è¯»å–å¹¶æ£€æµ‹å›¾åƒçš„å‡½æ•°">3.2 åœ¨ detector.c ä¸­æ·»åŠ è¯»å–å¹¶æ£€æµ‹å›¾åƒçš„å‡½æ•°</h3>
<ul>
<li>ä¸ TUM æ•°æ®é›†ç±»ä¼¼ï¼Œåˆ›å»º <code>test_detector_kitti_batch()</code> å‡½æ•°ï¼›</li>
<li>è¯»å–å›¾åƒæŒ‰ç…§ 6 ä½æ•°åºå·æ¥è¯»å–ï¼š
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">// STEP 1. å¾—åˆ°è¾“å…¥æ–‡ä»¶
// è¯»å–è¾“å…¥çš„å›¾åƒæ–‡ä»¶ï¼š~/color/21/image_2/000001.png
sprintf(input_img_name, &#34;%simage_2/%06d.png&#34;, input_folder, num);   // color image_2ï¼Œgray image_0
printf(&#34;è¾“å…¥æ–‡ä»¶åï¼š %s\n&#34;, input_img_name);
</code></pre></td></tr></table>
</div>
</div></li>
<li>è¾“å‡ºç»“æœçš„æ–‡ä»¶åæœ‰ä¸¤ç§å­˜å‚¨æ–¹å¼ï¼š
<ul>
<li><strong>ç¬¬ä¸€ç§æ˜¯æŒ‰åºå·å‘½å</strong>ï¼ˆé»˜è®¤æƒ…å†µï¼‰ï¼Œç»“æœä¿å­˜ä¸ºï¼š<code>000001.jpg</code> å’Œ <code>000001.txt</code>ï¼›</li>
<li><strong>ç¬¬äºŒç§æ˜¯æŒ‰ç…§æ—¶é—´æˆ³å‘½å</strong>ï¼Œç»“æœä¿å­˜ä¸ºï¼š<code>0.10387.jpg</code> å’Œ <code>0.10387.txt</code>ï¼›</li>
<li>å¯åœ¨ <code>test_detector_kitti_batch()</code> å‡½æ•°ä¸­é€‰æ‹©
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="c1">// ã€æ–¹æ³• â‘ ã€‘ï¼š ä»¥åºå·å‘½å
</span><span class="c1"></span><span class="n">printf</span><span class="p">(</span><span class="s">&#34;æ–‡ä»¶åºå·ï¼š %06d</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">num</span><span class="p">);</span>
<span class="n">sprintf</span><span class="p">(</span><span class="n">output_file_name</span><span class="p">,</span> <span class="s">&#34;%06d&#34;</span><span class="p">,</span> <span class="n">num</span><span class="p">);</span>
<span class="c1">// // ã€æ–¹æ³• â‘¡ã€‘ï¼š ä»¥æ—¶é—´æˆ³å‘½å
</span><span class="c1">// // é€è¡Œè¯»å– txt æ–‡ä»¶çš„æ—¶é—´æˆ³ï¼š1.036224e-01.
</span><span class="c1">// memset(szTest, 0, sizeof(szTest));
</span><span class="c1">// fgets(szTest, sizeof(szTest) - 1, fp_rgb_txt); // åŒ…å«äº†æ¢è¡Œç¬¦
</span><span class="c1">// strncpy(output_file_name, szTest, 12);
</span><span class="c1">// // å°†æ—¶é—´æˆ³è½¬æ¢æˆåè¿›åˆ¶
</span><span class="c1">// double tmp_name = strtod(output_file_name, NULL);   // note strtod() è½¬æ¢æˆ lf åè¿›åˆ¶ç±»å‹.
</span><span class="c1">// // ä¿ç•™ 5 ä½å°æ•°.
</span><span class="c1">// sprintf(output_file_name, &#34;%.5lf&#34;, tmp_name);
</span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
</li>
</ul>
<hr>
<h2 id="4-åœ¨-imagec-ä¸­æ·»åŠ ä¿å­˜ç»“æœå‡½æ•°">4. åœ¨ image.c ä¸­æ·»åŠ ä¿å­˜ç»“æœå‡½æ•°</h2>
<ul>
<li><strong>å…·ä½“ä»£ç ï¼š</strong><a href="https://github.com/wuxiaolang/darknet/blob/master/src/image.c?1552373025166"><strong>image.c</strong></a></li>
<li>æ­¤å‡½æ•°ä»¿å†™çš„ <code>draw_detections()</code>ï¼Œå…·ä½“è¯¦è§ï¼š</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">void draw_save_detections(  image im, 
                            detection *dets, 
                            int num, 
                            float thresh, 
                            char **names, 
                            image **alphabet, 
                            int classes,
                            FILE *save_txt)
{â€¦â€¦}
</code></pre></td></tr></table>
</div>
</div><ul>
<li><strong>åˆ†åˆ«ä¿å­˜ ç±»åˆ«ã€å·¦ä¸Šè§’åæ ‡ + å®½ + é•¿ã€ç½®ä¿¡åº¦</strong>ï¼Œä¹Ÿå¯ä»¥ä¿®æ”¹ä¸ºç±»åˆ«åœ¨ coco.name ä¸­çš„ç¼–å·ï¼Œå·¦ä¸Šè§’å’Œå³ä¸‹è§’åæ ‡</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">// NOTE å·¦ä¸Šè§’åæ ‡å’Œå³ä¸‹è„šåæ ‡
int left  = (b.x-b.w/2.)*im.w;
int top   = (b.y-b.h/2.)*im.h;
int right = (b.x+b.w/2.)*im.w;
int bot   = (b.y+b.h/2.)*im.h;

if(left &lt; 0) left = 0;
if(right &gt; im.w-1) right = im.w-1;
if(top &lt; 0) top = 0;
if(bot &gt; im.h-1) bot = im.h-1;
            
// NOTE åˆ†åˆ«å†™å…¥ç±»åˆ«å’Œåæ ‡
// fprintf(save_txt,&#34;%s\t%d\t%d\t%d\t%d\t%.2f\n&#34;, names[class], left, top, right-left, bot-top, dets[i].prob[class]);
fprintf(save_txt,&#34;%d %d %d %d %d\n&#34;, class, left, top, right-left, bot-top);
</code></pre></td></tr></table>
</div>
</div><ul>
<li>è¾“å‡º <strong>txt ç»“æœ</strong>ï¼Œä¿å­˜æ ¼å¼ï¼šç±»åˆ« ID â€ƒ å·¦ä¸Šè§’.x â€ƒ å·¦ä¸Šè§’.y â€ƒ é•¿ â€ƒ å®½ â€ƒ [ç½®ä¿¡åº¦]
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">66   70    294   260   185    0.794691
64   255   258   63     38    0.813716
62   224   0     243   234    0.610995
</code></pre></td></tr></table>
</div>
</div></li>
<li>å¯æŒ‡å®š<strong>åªä¿å­˜æŸç§ç±»å‹çš„ç»“æœ</strong>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="c1">// NOTE åªç­›é€‰å‡º &#34;cup&#34; å’Œ &#34;bottle&#34; ç±»åˆ«.
</span><span class="c1">// if ((strcmp(names[class], &#34;cup&#34;) != 0)&amp;&amp;(strcmp(names[class], &#34;bottle&#34;) != 0))
</span><span class="c1">//     {continue;}
</span><span class="c1">// åªé€‰å‡º car.
</span><span class="c1"></span><span class="k">if</span> <span class="p">(</span><span class="n">strcmp</span><span class="p">(</span><span class="n">names</span><span class="p">[</span><span class="k">class</span><span class="err">], &#34;</span><span class="nc">car</span><span class="s">&#34;) != 0)</span>
    <span class="k">continue</span><span class="p">;</span>
</code></pre></td></tr></table>
</div>
</div></li>
</ul>
<p><img src="https://github.com/wuxiaolang/darknet/blob/master/gif/yolo_tum.gif?raw=true" alt=""></p>
<hr>
<blockquote>
<p>2019.03.11 <br>
<a href="mailto:wuyanminmax@gmail.com">wuyanminmax@gmail.com</a></p>
</blockquote>

    </div>

    
<footer class="post-footer">
      
      <nav class="post-nav">
        <a class="prev" href="/2019-03-14-learnable-line/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default"> ğŸ“œ è®ºæ–‡é˜…è¯» | è§†è§‰ SLAM çš„å¯å­¦ä¹ çº¿æ®µæè¿°ç¬¦</span>
            <span class="prev-text nav-mobile">ä¸Šä¸€ç¯‡</span>
          </a>
        <a class="next" href="/2019-02-27-object-ba/">
            <span class="next-text nav-default"> ğŸ“œ è®ºæ–‡é˜…è¯» | ä½¿ç”¨ç‰©ä½“è¡¥å……çš„ BA æ¥æ¢å¤å•ç›® SLAM çš„ç¨³å®šå°ºåº¦</span>
            <span class="next-text nav-mobile">ä¸‹ä¸€ç¯‡</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="wuyanminmax@gmail.com" class="iconfont icon-email" title="email"></a>
      <a href="https://github.com/wuxiaolang" class="iconfont icon-github" title="github"></a>
      <a href="https://www.zhihu.com/people/wuyanmin2018" class="iconfont icon-zhihu" title="zhihu"></a>
  <a href="https://wym.netlify.app/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  
  

  
  <div class="busuanzi-footer">
    
      
    
  </div>

  <span class="copyright-year">
    &copy; 
    2019 - 
    2020
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">wu</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>
<script type="text/javascript" src="/dist/even.26188efa.min.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]},
      TeX: {equationNumbers: {autoNumber: "AMS"}},
      showProcessingMessages: false,
      messageStyle: 'none'
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"  integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-160646347-2', 'auto');
	ga('set', 'anonymizeIp', true);
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<script id="baidu_analytics">
  var _hmt = _hmt || [];
  (function() {
    if (window.location.hostname === 'localhost') return;
    var hm = document.createElement("script"); hm.async = true;
    hm.src = "https://hm.baidu.com/hm.js?352520a6e7c1df580f6de1f879049608";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
</script>

<script id="baidu_push">
  (function(){
    if (window.location.hostname === 'localhost') return;
    var bp = document.createElement('script'); bp.async = true;
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
      bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
      bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
  })();
</script>




</body>
</html>
